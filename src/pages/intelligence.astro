---
import BaseLayout from '../layout/BaseLayout.astro';
import { blogPosts } from '../data/blogPosts';
import IntelCTA from '../components/IntelCTA.astro';
import NewsletterFormIntel from '../components/NewsletterFormIntel.astro';


const title = 'Intelligence | Lotus Nano';
const description = "PFAS transformation insights from people who've actually done it. Strategic intelligence for manufacturers navigating PFAS elimination.";

const jsonLd = {
  '@context': 'https://schema.org',
  '@type': 'CollectionPage',
  '@id': 'https://lotus-nano.com/intelligence#webpage',
  name: title,
  url: 'https://lotus-nano.com/intelligence',
  description: description,
  inLanguage: 'en-GB',
  isPartOf: {
    '@id': 'https://lotus-nano.com/#website'
  },
};

const allPosts = blogPosts;
---

<BaseLayout
  title={title}
  description={description}
  canonical="https://lotus-nano.com/intelligence"
  ogImage="https://the-knowledge-brokers.sirv.com/lotus-nano/lotus-nano-og.jpg?w=1200&h=630"
  ogType="website"
>
  <Fragment slot="head">
    <script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />
  </Fragment>

  <!-- Single Continuous Section -->
  <article class="min-h-screen bg-stone-900 relative pt-32 lg:pt-48">
    
    <div class="relative max-w-7xl mx-auto px-6 lg:px-12 py-16 lg:py-20">
      
      <!-- Asymmetric Split Layout -->
      <div class="grid lg:grid-cols-12 gap-12 lg:gap-20 mb-32">
        
        <!-- Left: Massive Title -->
        <div class="lg:col-span-5">
          <h1 class="text-5xl sm:text-6xl lg:text-7xl xl:text-8xl font-black text-stone-100 leading-tight tracking-tighter mb-8">
            Intel&shy;li&shy;gence
          </h1>
          
          <p class="text-base text-stone-400 leading-relaxed max-w-md">
            Strategic intelligence for manufacturers navigating PFAS transformation. No theories. No useless clickbaits. Just what works when the clock's ticking.
          </p>
        </div>

        <!-- Right: Newsletter - Minimal -->
        <div class="lg:col-span-7 flex items-end">
            <NewsletterFormIntel />
        </div>
      </div>

      <!-- Articles: Staggered Masonry Grid -->
      <div class="grid lg:grid-cols-3 gap-6 lg:gap-8 mb-24">
        {allPosts.map((post, index) => {
          const isLarge = index % 5 === 0;
          const isOffset = index % 3 === 1;
          
          return (
            <article 
              class={`
                group relative
                ${isLarge ? 'lg:col-span-2 lg:row-span-2' : ''}
                ${isOffset ? 'lg:mt-12' : ''}
              `}>
              
              <a href={post.url} class="block">
                
                <!-- Image -->
                <div class={`relative overflow-hidden mb-5 ${isLarge ? 'aspect-video' : 'aspect-[4/3]'}`}>
                  <img 
                    src={post.img}
                    alt={post.blogtitle}
                    class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700 group-hover:scale-105"
                    loading="lazy">
                  
                  <!-- Gradient Overlay -->
                  <div class="absolute inset-0 bg-gradient-to-t from-stone-900/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                  
                  <!-- Category Badge -->
                  <div class="absolute top-4 left-4">
                    <span class="text-xs font-bold tracking-wider uppercase text-amber-400 bg-stone-900/80 backdrop-blur-sm px-3 py-1.5 rounded">
                      {post.categoryFull}
                    </span>
                  </div>
                </div>

                <!-- Content -->
                <div class={isLarge ? 'max-w-3xl' : ''}>
                  
                  <!-- Meta -->
                  <div class="flex items-center gap-3 text-xs text-stone-600 font-medium mb-3 tracking-wide">
                    <span>{post.publishDateFull}</span>
                    <span class="w-1 h-1 rounded-full bg-stone-700"></span>
                    <span>{post.readTime}</span>
                  </div>

                  <!-- Title -->
                  <h2 class={`font-bold text-stone-100 leading-tight mb-3 group-hover:text-amber-400 transition-colors duration-300
                    ${isLarge ? 'text-3xl lg:text-4xl' : 'text-xl lg:text-2xl'}`}>
                    {post.blogtitle}
                  </h2>

                  <!-- Description -->
                  <p class="text-sm text-stone-500 leading-relaxed">
                    {post.blogdescr}
                  </p>
                </div>
              </a>
            </article>
          );
        })}
      </div>


    </div>
    <IntelCTA />

  </article>
</BaseLayout>
